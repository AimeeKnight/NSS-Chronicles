#!/usr/bin/env ruby

$LOAD_PATH << "lib"
$LOAD_PATH << "models"

require 'environment'
Environment.environment = "test"
$stderr = $stdout

require 'cohort'

def menu
<<EOS
What do you want to do?
1. Add Cohort
2. Add Student
3. Add Project
EOS
end

def add_cohort
  puts "Please enter the cohort as: title, language 1/language 2, term"
  cohort_input = gets
  return unless cohort_input
  cohort_input = cohort_input.chomp.split(",").map(&:strip)
  cohort = Cohort.new(cohort_input[0], cohort_input[1], cohort_input[2])
  if cohort.save
    puts "#{cohort_input[0]} has been added."
  else
    puts cohort.errors
    add_cohort
  end
end

def get_menu_selection
  puts menu
  input = gets
  return unless input
  input.chomp!
  #################### COHORT #################### 
  if input == "1"
    add_cohort
  #################### STUDENT #################### 
  elsif input == "2"
    puts "Please enter the student as first name, last name, cohort id"
    values = gets
    return unless values
    values = values.chomp.split(",").map(&:strip)
    student = Student.new(values[0], values[1], values[2])
    puts student.to_s
  #################### PROJECT #################### 
  elsif input == "3"
    puts "Please enter the project as: title, primary language, student id, github url, hosted url"
    values = gets
    return unless values
    values = values.chomp.split(",").map(&:strip)
    project = Project.new(values[0], values[1], values[2], values[3], values[4])
    puts project.to_s
  else
    puts "'#{input}' is not a valid selection"
    get_menu_selection
  end
end

get_menu_selection
